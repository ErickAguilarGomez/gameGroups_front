import{a as $,r as E,_ as M}from"./usePreloader-DvikwN0v.js";import{u as O}from"./announcement-BE_lohNR.js";import{l as q,U as y,r as g,z as T,A as j,m as G,ae as H,c as n,g as r,b as u,a as t,F as x,d as k,p as J,t as m,w as z,q as K,o,_ as Q}from"./index-Ddq0Vmzr.js";import"./useShowHide-717t6y_D-DsBGObqe.js";const W={class:"announcement-container"},X={key:0,class:"announcement-section"},Y={key:0,class:"announcement-loading"},Z={key:1,class:"announcement-empty"},ee={key:2,class:"carousel"},te={class:"media-wrapper"},ne=["src"],oe=["src","alt"],ae={class:"media-controls"},se={class:"indicators"},le=["onClick"],ie={class:"content-wrapper below"},ce={class:"announcement-title"},re={class:"announcement-dates column"},ue={key:0,class:"date-item"},de={class:"date-line"},ve={key:1,class:"date-item"},me={class:"date-line"},_e={class:"announcement-description"},pe={class:"text-center"},he=["src","alt"],fe={class:"text-center"},ye=["src"],ge=q({__name:"AnnouncementSection",props:{isCollapsed:{type:Boolean}},setup(P){const C=y(P,"isCollapsed"),_=O(),s=y(_,"announcements"),B=y(_,"loading"),i=g(0);let d;const p=g(!1),b=g(!1),e=T(()=>s.value[i.value]||{}),h=()=>{v(),f()},w=()=>{s.value.length&&(i.value=(i.value+1)%s.value.length,h())},S=()=>{s.value.length&&(i.value=(i.value-1+s.value.length)%s.value.length,h())},N=a=>{s.value.length&&(i.value=a,h())},I=a=>{if(!a)return"";try{return new Date(a).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return a}},L=()=>{e.value?.url&&(p.value=!0)},R=a=>{if(a)try{window.open(a,"_blank","noopener")}catch{window.location.href=a}};j(C,a=>{a?v():f()});const f=()=>{v(),d=window.setInterval(()=>{w()},5e3)},v=()=>{d&&(clearInterval(d),d=void 0)};return G(async()=>{$(),await _.fetchAnnouncements(),s.value.length>0&&(i.value=0),f(),E()}),H(()=>{v()}),(a,l)=>{const U=k("IconPlayerPlay"),D=k("IconChevronLeft"),F=k("IconChevronRight"),V=M;return o(),n("div",W,[C.value?r("",!0):(o(),n("div",X,[B.value?(o(),n("div",Y,"Cargando anuncios...")):s.value.length===0?(o(),n("div",Z,"No hay anuncios")):(o(),n("div",ee,[t("div",te,[e.value.is_video?(o(),n(x,{key:0},[t("video",{src:e.value.url,muted:"",playsinline:"",class:"announcement-media",preload:"metadata"},null,8,ne),t("button",{type:"button",class:"play-overlay",onClick:l[0]||(l[0]=c=>R(e.value.url)),"aria-label":"Reproducir anuncio"},[u(U,{size:26})])],64)):(o(),n("img",{key:1,onClick:L,src:e.value.url,alt:e.value.title,class:"announcement-media"},null,8,oe))]),t("div",ae,[t("button",{type:"button",onClick:S,class:"control-btn","aria-label":"Anterior"},[u(D,{size:20})]),t("div",se,[(o(!0),n(x,null,J(s.value,(c,A)=>(o(),n("button",{type:"button",key:c.id,class:K(["dot",{active:A===i.value}]),onClick:Ce=>N(A),"aria-label":"Ir a anuncio"},null,10,le))),128))]),t("button",{type:"button",onClick:w,class:"control-btn","aria-label":"Siguiente"},[u(F,{size:20})])]),t("div",ie,[t("h4",ce,m(e.value.title),1),t("div",re,[e.value.start_date?(o(),n("div",ue,[t("small",de,"Inicio: "+m(I(e.value.start_date)),1)])):r("",!0),e.value.end_date?(o(),n("div",ve,[t("small",me,"Fin: "+m(I(e.value.end_date)),1)])):r("",!0)]),t("p",_e,m(e.value.description),1)])])),u(V,{modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=c=>p.value=c),title:"Vista previa",size:"lg","no-footer":""},{default:z(()=>[t("div",pe,[e.value.url?(o(),n("img",{key:0,src:e.value.url,alt:e.value.title,class:"img-fluid"},null,8,he)):r("",!0)])]),_:1},8,["modelValue"]),u(V,{modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=c=>b.value=c),title:"Vista previa",size:"lg","no-footer":""},{default:z(()=>[t("div",fe,[e.value.url?(o(),n("video",{key:0,src:e.value.url,controls:"",autoplay:"",playsinline:"",class:"img-fluid"},null,8,ye)):r("",!0)])]),_:1},8,["modelValue"])]))])}}}),Ae=Q(ge,[["__scopeId","data-v-e811e61a"]]);export{Ae as default};
