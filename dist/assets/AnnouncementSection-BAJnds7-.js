import{u as B}from"./announcement-TX70Z2fo.js";import{l as N,U as m,r as P,z as V,A as D,m as F,ae as L,c as a,g as h,a as e,t as u,b as p,h as f,af as R,F as I,ag as E,ah as U,p as $,q,o,_ as M}from"./index-COsPQxU0.js";import{a as T,r as j}from"./usePreloader-ddf6uGKr.js";const G={class:"announcement-container"},H={key:0,class:"announcement-section"},J={key:0,class:"announcement-loading"},K={key:1,class:"announcement-empty"},O={key:2,class:"carousel"},Q={class:"carousel-header"},W={class:"announcement-title"},X={class:"announcement-dates"},Y={key:0,class:"date-item"},Z={class:"date-line"},ee={key:1,class:"date-item"},ne={class:"date-line"},te={class:"media-container-outer"},ae={class:"media-container"},oe={class:"media-content"},se=["src"],ce=["src","alt"],le={class:"carousel-footer"},ie={class:"indicators"},re=["onClick"],ue={class:"announcement-description"},de=N({__name:"AnnouncementSection",props:{isCollapsed:{type:Boolean}},setup(w){const y=m(w,"isCollapsed"),d=B(),s=m(d,"announcements"),A=m(d,"loading"),c=P(0);let i;const t=V(()=>s.value[c.value]||{}),v=()=>{r(),_()},g=()=>{s.value.length&&(c.value=(c.value+1)%s.value.length,v())},S=()=>{s.value.length&&(c.value=(c.value-1+s.value.length)%s.value.length,v())},x=n=>{s.value.length&&(c.value=n,v())},b=n=>{if(!n)return"";try{return new Date(n).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return n}},z=n=>{if(n)try{window.open(n,"_blank","noopener")}catch{window.location.href=n}};D(y,n=>{n?r():_()});const _=()=>{r(),i=window.setInterval(()=>{g()},5e3)},r=()=>{i&&(clearInterval(i),i=void 0)};return F(async()=>{T(),await d.fetchAnnouncements(),s.value.length>0&&(c.value=0),_(),j()}),L(()=>{r()}),(n,l)=>(o(),a("div",G,[y.value?h("",!0):(o(),a("div",H,[A.value?(o(),a("div",J,"Cargando anuncios...")):s.value.length===0?(o(),a("div",K,"No hay anuncios")):(o(),a("div",O,[e("div",Q,[e("h4",W,u(t.value.title),1),e("div",X,[t.value.start_date?(o(),a("div",Y,[e("small",Z,"Inicio: "+u(b(t.value.start_date)),1)])):h("",!0),t.value.end_date?(o(),a("div",ee,[e("small",ne,"Fin: "+u(b(t.value.end_date)),1)])):h("",!0)])]),e("div",te,[e("div",ae,[e("button",{type:"button",onClick:S,class:"control-btn control-left","aria-label":"Anterior"},[p(f(R),{size:32})]),e("div",oe,[t.value.is_video?(o(),a(I,{key:0},[e("video",{src:t.value.url,muted:"",playsinline:"",class:"announcement-media",preload:"metadata"},null,8,se),e("button",{type:"button",class:"play-overlay",onClick:l[0]||(l[0]=k=>z(t.value.url)),"aria-label":"Reproducir anuncio"},[p(f(E),{size:40})])],64)):(o(),a("img",{key:1,src:t.value.url,alt:t.value.title,class:"announcement-media"},null,8,ce))]),e("button",{type:"button",onClick:g,class:"control-btn control-right","aria-label":"Siguiente"},[p(f(U),{size:32})])])]),e("div",le,[e("div",ie,[(o(!0),a(I,null,$(s.value,(k,C)=>(o(),a("button",{type:"button",key:k.id,class:q(["dot",{active:C===c.value}]),onClick:_e=>x(C),"aria-label":"Ir a anuncio"},null,10,re))),128))]),e("p",ue,u(t.value.description),1)])]))]))]))}}),fe=M(de,[["__scopeId","data-v-fc817f02"]]);export{fe as default};
