import{l as N,r as c,m as B,N as I,z as E,c as l,a as s,g as m,q as f,b as x,t as i,h as g,O as F,B as L,P as j,Q as T,e as M,F as O,p as R,f as U,R as q,S as P,o,_ as Q}from"./index-Ddq0Vmzr.js";const A={key:0,class:"d-flex align-items-center gap-2"},$={class:"flag"},G={class:"country-name"},H={key:1,class:"placeholder-text text-muted"},J={key:0,class:"dropdown-menu show w-100 p-0 mt-1 shadow-sm border-0 overflow-hidden"},K={class:"p-2 search-container sticky-top bg-white border-bottom"},W={class:"input-group input-group-sm"},X={class:"input-group-text bg-light border-end-0"},Y={class:"countries-list custom-scrollbar"},Z=["onClick"],ee={class:"flag"},te={class:"text-truncate"},ae={key:0,class:"p-3 text-center text-muted small"},se={key:1,class:"invalid-feedback d-block"},oe=N({__name:"CountrySelect",props:{modelValue:{},modelSlug:{},error:{}},emits:["update:modelValue","update:modelSlug"],setup(n,{emit:w}){const v=w,r=c(!1),u=c(""),d=c([]),p=c(null),h=c(null);B(async()=>{try{const e=await fetch("https://restcountries.com/v3.1/all?fields=name,cca2");if(e.ok){const a=await e.json();d.value=a.map(t=>({name:t?.name?.common??t?.name,slug:(t?.cca2??V(t?.name?.common??t?.name))?.toString(),code:t?.cca2,flag:D(t?.cca2)})).sort((t,C)=>t.name.localeCompare(C.name))}}catch(e){console.error("Error al cargar países:",e)}document.addEventListener("click",y)}),I(()=>{document.removeEventListener("click",y)});const k=E(()=>{const e=_(u.value);return e?d.value.filter(a=>_(a.name).includes(e)):d.value});function S(){r.value=!r.value,r.value&&(u.value="",P(()=>{h.value?.focus()}))}function b(e){v("update:modelValue",e.name),v("update:modelSlug",e.slug),r.value=!1}function y(e){p.value&&!p.value.contains(e.target)&&(r.value=!1)}function z(e){return e&&d.value.find(t=>t.slug===e)?.flag||""}function V(e){return e.toString().toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-")}function D(e){return e?e.toUpperCase().split("").map(a=>String.fromCodePoint(127397+a.charCodeAt(0))).join(""):""}function _(e){return e.toString().toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").trim()}return(e,a)=>(o(),l("div",{class:"country-select-container",ref_key:"containerRef",ref:p},[s("div",{class:"input-wrapper",onClick:S},[s("div",{class:f(["selected-display form-control d-flex align-items-center justify-content-between",{"is-invalid":!!n.error}])},[n.modelValue?(o(),l("span",A,[s("span",$,i(z(n.modelSlug)),1),s("span",G,i(n.modelValue),1)])):(o(),l("span",H,"Selecciona tu país")),x(g(F),{size:18,class:f(["chevron",{rotated:r.value}])},null,8,["class"])],2)]),r.value?(o(),l("div",J,[s("div",K,[s("div",W,[s("span",X,[x(g(j),{size:14})]),L(s("input",{ref_key:"searchInput",ref:h,type:"text",class:"form-control border-start-0 bg-light",placeholder:"Buscar país...","onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),onClick:a[1]||(a[1]=M(()=>{},["stop"]))},null,512),[[T,u.value]])])]),s("div",Y,[(o(!0),l(O,null,R(k.value,t=>(o(),l("div",{key:t.slug,class:f(["dropdown-item d-flex align-items-center gap-2 py-2 px-3",{active:n.modelSlug===t.slug}]),onClick:C=>b(t)},[s("span",ee,i(t.flag),1),s("span",te,i(t.name),1),n.modelSlug===t.slug?(o(),U(g(q),{key:0,size:16,class:"ms-auto text-primary"})):m("",!0)],10,Z))),128)),k.value.length===0?(o(),l("div",ae," No se encontraron resultados ")):m("",!0)])])):m("",!0),n.error?(o(),l("div",se,i(n.error),1)):m("",!0)],512))}}),le=Q(oe,[["__scopeId","data-v-0135cbce"]]);export{le as C};
