import{_ as $}from"./index-BDkr-YqK-BHP480si.js";import{u as E}from"./announcement-i9z5Tgn8.js";import{l as M,U as y,r as g,z as O,A as q,m as T,ae as j,c as n,g as u,b as r,a as t,F as x,d as k,p as G,t as _,w as z,q as H,o,_ as J}from"./index-dPwBrLZS.js";import"./useShowHide-717t6y_D-C-V7aJWO.js";const K={class:"announcement-container"},Q={key:0,class:"announcement-section"},W={key:0,class:"announcement-loading"},X={key:1,class:"announcement-empty"},Y={key:2,class:"carousel"},Z={class:"media-wrapper"},ee=["src"],te=["src","alt"],ne={class:"media-controls"},oe={class:"indicators"},ae=["onClick"],se={class:"content-wrapper below"},le={class:"announcement-title"},ie={class:"announcement-dates column"},ce={key:0,class:"date-item"},ue={class:"date-line"},re={key:1,class:"date-item"},de={class:"date-line"},ve={class:"announcement-description"},_e={class:"text-center"},me=["src","alt"],pe={class:"text-center"},he=["src"],fe=M({__name:"AnnouncementSection",props:{isCollapsed:{type:Boolean}},setup(B){const C=y(B,"isCollapsed"),m=E(),s=y(m,"announcements"),S=y(m,"loading"),i=g(0);let d;const p=g(!1),b=g(!1),e=O(()=>s.value[i.value]||{}),h=()=>{v(),f()},w=()=>{s.value.length&&(i.value=(i.value+1)%s.value.length,h())},N=()=>{s.value.length&&(i.value=(i.value-1+s.value.length)%s.value.length,h())},P=a=>{s.value.length&&(i.value=a,h())},I=a=>{if(!a)return"";try{return new Date(a).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return a}},L=()=>{e.value?.url&&(p.value=!0)},R=a=>{if(a)try{window.open(a,"_blank","noopener")}catch{window.location.href=a}};q(C,a=>{a?v():f()});const f=()=>{v(),d=window.setInterval(()=>{w()},5e3)},v=()=>{d&&(clearInterval(d),d=void 0)};return T(async()=>{await m.fetchAnnouncements(),s.value.length>0&&(i.value=0),f()}),j(()=>{v()}),(a,l)=>{const U=k("IconPlayerPlay"),D=k("IconChevronLeft"),F=k("IconChevronRight"),V=$;return o(),n("div",K,[C.value?u("",!0):(o(),n("div",Q,[S.value?(o(),n("div",W,"Cargando anuncios...")):s.value.length===0?(o(),n("div",X,"No hay anuncios")):(o(),n("div",Y,[t("div",Z,[e.value.is_video?(o(),n(x,{key:0},[t("video",{src:e.value.url,muted:"",playsinline:"",class:"announcement-media",preload:"metadata"},null,8,ee),t("button",{type:"button",class:"play-overlay",onClick:l[0]||(l[0]=c=>R(e.value.url)),"aria-label":"Reproducir anuncio"},[r(U,{size:26})])],64)):(o(),n("img",{key:1,onClick:L,src:e.value.url,alt:e.value.title,class:"announcement-media"},null,8,te)),t("div",ne,[t("button",{type:"button",onClick:N,class:"control-btn","aria-label":"Anterior"},[r(D,{size:14})]),t("div",oe,[(o(!0),n(x,null,G(s.value,(c,A)=>(o(),n("button",{type:"button",key:c.id,class:H(["dot",{active:A===i.value}]),onClick:ge=>P(A),"aria-label":"Ir a anuncio"},null,10,ae))),128))]),t("button",{type:"button",onClick:w,class:"control-btn","aria-label":"Siguiente"},[r(F,{size:14})])])]),t("div",se,[t("h4",le,_(e.value.title),1),t("div",ie,[e.value.start_date?(o(),n("div",ce,[t("small",ue,"Inicio: "+_(I(e.value.start_date)),1)])):u("",!0),e.value.end_date?(o(),n("div",re,[t("small",de,"Fin: "+_(I(e.value.end_date)),1)])):u("",!0)]),t("p",ve,_(e.value.description),1)])])),r(V,{modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=c=>p.value=c),title:"Vista previa",size:"lg","no-footer":""},{default:z(()=>[t("div",_e,[e.value.url?(o(),n("img",{key:0,src:e.value.url,alt:e.value.title,class:"img-fluid"},null,8,me)):u("",!0)])]),_:1},8,["modelValue"]),r(V,{modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=c=>b.value=c),title:"Vista previa",size:"lg","no-footer":""},{default:z(()=>[t("div",pe,[e.value.url?(o(),n("video",{key:0,src:e.value.url,controls:"",autoplay:"",playsinline:"",class:"img-fluid"},null,8,he)):u("",!0)])]),_:1},8,["modelValue"])]))])}}}),Ie=J(fe,[["__scopeId","data-v-6560703a"]]);export{Ie as default};
